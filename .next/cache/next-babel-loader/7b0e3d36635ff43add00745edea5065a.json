{"ast":null,"code":"import connectDB from '../../../utils/connectDB';\nimport Users from '../../../models/userModel';\nimport valid from '../../../utils/valid';\nimport bcrypt from 'bcrypt';\nconnectDB();\nexport default async (req, res) => {\n  switch (req.method) {\n    case \"POST\":\n      await register(req, res);\n      break;\n  }\n};\nconst register = async (req, res) => {\n  try {\n    const {\n      name,\n      email,\n      password,\n      cf_password\n    } = req.body;\n    const errMsg = valid(name, email, password, cf_password);\n    if (errMsg) return res.status(400).json({\n      err: errMsg\n    });\n    const user = await Users.findOne({\n      email\n    });\n    if (user) return res.status(400).json({\n      err: 'This email already exists.'\n    });\n    const passwordHash = await bcrypt.hash(password, 12);\n    const newUser = new Users({\n      name,\n      email,\n      password: passwordHash,\n      cf_password\n    });\n    await newUser.save();\n    res.json({\n      msg: \"Register Success!\"\n    });\n  } catch (err) {\n    return res.status(500).json({\n      err: err.message\n    });\n  }\n};","map":null,"metadata":{},"sourceType":"module"}