{"ast":null,"code":"import connectDB from '../../../../utils/connectDB';\nimport Orders from '../../../../models/orderModel';\nimport auth from '../../../../middleware/auth';\nconnectDB();\nexport default async (req, res) => {\n  switch (req.method) {\n    case \"PATCH\":\n      await paymentOrder(req, res);\n      break;\n  }\n};\nconst paymentOrder = async (req, res) => {\n  try {\n    const result = await auth(req, res);\n    if (result.role === 'user') {\n      const {\n        id\n      } = req.query;\n      const {\n        paymentId\n      } = req.body;\n      await Orders.findOneAndUpdate({\n        _id: id\n      }, {\n        paid: true,\n        dateOfPayment: new Date().toISOString(),\n        paymentId,\n        method: 'Paypal'\n      });\n      res.json({\n        msg: 'Payment success!'\n      });\n    }\n  } catch (err) {\n    return res.status(500).json({\n      err: err.message\n    });\n  }\n};","map":null,"metadata":{},"sourceType":"module"}