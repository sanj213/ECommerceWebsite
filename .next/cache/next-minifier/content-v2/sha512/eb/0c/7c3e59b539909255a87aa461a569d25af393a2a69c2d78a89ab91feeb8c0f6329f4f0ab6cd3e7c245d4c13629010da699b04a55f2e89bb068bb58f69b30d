{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[15],{\"W+IF\":function(e,t,r){\"use strict\";r.r(t);var n=r(\"HaE+\"),a=r(\"rePB\"),o=r(\"8Kt/\"),c=r.n(o),i=r(\"q1tI\"),s=r(\"qG/y\"),l=r(\"YFqc\"),u=r.n(l),f=r(\"cSol\"),p=r(\"EFaQ\"),d=r(\"0+Tl\"),h=r(\"nKUr\");function y(){y=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},o=\"function\"==typeof Symbol?Symbol:{},c=o.iterator||\"@@iterator\",i=o.asyncIterator||\"@@asyncIterator\",s=o.toStringTag||\"@@toStringTag\";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},\"\")}catch(e){l=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=t&&t.prototype instanceof v?t:v,c=Object.create(o.prototype),i=new F(n||[]);return a(c,\"_invoke\",{value:L(e,r,i)}),c}function f(e,t,r){try{return{type:\"normal\",arg:e.call(t,r)}}catch(e){return{type:\"throw\",arg:e}}}t.wrap=u;var p=\"suspendedStart\",d=\"executing\",h=\"completed\",m={};function v(){}function j(){}function b(){}var g={};l(g,c,(function(){return this}));var O=Object.getPrototypeOf,w=O&&O(O(k([])));w&&w!==r&&n.call(w,c)&&(g=w);var x=b.prototype=v.prototype=Object.create(g);function N(e){[\"next\",\"throw\",\"return\"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function r(a,o,c,i){var s=f(e[a],e,o);if(\"throw\"!==s.type){var l=s.arg,u=l.value;return u&&\"object\"==typeof u&&n.call(u,\"__await\")?t.resolve(u.__await).then((function(e){r(\"next\",e,c,i)}),(function(e){r(\"throw\",e,c,i)})):t.resolve(u).then((function(e){l.value=e,c(l)}),(function(e){return r(\"throw\",e,c,i)}))}i(s.arg)}var o;a(this,\"_invoke\",{value:function(e,n){function a(){return new t((function(t,a){r(e,n,t,a)}))}return o=o?o.then(a,a):a()}})}function L(t,r,n){var a=p;return function(o,c){if(a===d)throw Error(\"Generator is already running\");if(a===h){if(\"throw\"===o)throw c;return{value:e,done:!0}}for(n.method=o,n.arg=c;;){var i=n.delegate;if(i){var s=_(i,n);if(s){if(s===m)continue;return s}}if(\"next\"===n.method)n.sent=n._sent=n.arg;else if(\"throw\"===n.method){if(a===p)throw a=h,n.arg;n.dispatchException(n.arg)}else\"return\"===n.method&&n.abrupt(\"return\",n.arg);a=d;var l=f(t,r,n);if(\"normal\"===l.type){if(a=n.done?h:\"suspendedYield\",l.arg===m)continue;return{value:l.arg,done:n.done}}\"throw\"===l.type&&(a=h,n.method=\"throw\",n.arg=l.arg)}}}function _(t,r){var n=r.method,a=t.iterator[n];if(a===e)return r.delegate=null,\"throw\"===n&&t.iterator.return&&(r.method=\"return\",r.arg=e,_(t,r),\"throw\"===r.method)||\"return\"!==n&&(r.method=\"throw\",r.arg=new TypeError(\"The iterator does not provide a '\"+n+\"' method\")),m;var o=f(a,t.iterator,r.arg);if(\"throw\"===o.type)return r.method=\"throw\",r.arg=o.arg,r.delegate=null,m;var c=o.arg;return c?c.done?(r[t.resultName]=c.value,r.next=t.nextLoc,\"return\"!==r.method&&(r.method=\"next\",r.arg=e),r.delegate=null,m):c:(r.method=\"throw\",r.arg=new TypeError(\"iterator result is not an object\"),r.delegate=null,m)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type=\"normal\",delete t.arg,e.completion=t}function F(e){this.tryEntries=[{tryLoc:\"root\"}],e.forEach(P,this),this.reset(!0)}function k(t){if(t||\"\"===t){var r=t[c];if(r)return r.call(t);if(\"function\"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function r(){for(;++a<t.length;)if(n.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return o.next=o}}throw new TypeError(typeof t+\" is not iterable\")}return j.prototype=b,a(x,\"constructor\",{value:b,configurable:!0}),a(b,\"constructor\",{value:j,configurable:!0}),j.displayName=l(b,s,\"GeneratorFunction\"),t.isGeneratorFunction=function(e){var t=\"function\"==typeof e&&e.constructor;return!!t&&(t===j||\"GeneratorFunction\"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,s,\"GeneratorFunction\")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},N(E.prototype),l(E.prototype,i,(function(){return this})),t.AsyncIterator=E,t.async=function(e,r,n,a,o){void 0===o&&(o=Promise);var c=new E(u(e,r,n,a),o);return t.isGeneratorFunction(r)?c:c.next().then((function(e){return e.done?e.value:c.next()}))},N(x),l(x,s,\"Generator\"),l(x,c,(function(){return this})),l(x,\"toString\",(function(){return\"[object Generator]\"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=k,F.prototype={constructor:F,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method=\"next\",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)\"t\"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if(\"throw\"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function a(n,a){return i.type=\"throw\",i.arg=t,r.next=n,a&&(r.method=\"next\",r.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var c=this.tryEntries[o],i=c.completion;if(\"root\"===c.tryLoc)return a(\"end\");if(c.tryLoc<=this.prev){var s=n.call(c,\"catchLoc\"),l=n.call(c,\"finallyLoc\");if(s&&l){if(this.prev<c.catchLoc)return a(c.catchLoc,!0);if(this.prev<c.finallyLoc)return a(c.finallyLoc)}else if(s){if(this.prev<c.catchLoc)return a(c.catchLoc,!0)}else{if(!l)throw Error(\"try statement without catch or finally\");if(this.prev<c.finallyLoc)return a(c.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,\"finallyLoc\")&&this.prev<a.finallyLoc){var o=a;break}}o&&(\"break\"===e||\"continue\"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=e,c.arg=t,o?(this.method=\"next\",this.next=o.finallyLoc,m):this.complete(c)},complete:function(e,t){if(\"throw\"===e.type)throw e.arg;return\"break\"===e.type||\"continue\"===e.type?this.next=e.arg:\"return\"===e.type?(this.rval=this.arg=e.arg,this.method=\"return\",this.next=\"end\"):\"normal\"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if(\"throw\"===n.type){var a=n.arg;T(r)}return a}}throw Error(\"illegal catch attempt\")},delegateYield:function(t,r,n){return this.delegate={iterator:k(t),resultName:r,nextLoc:n},\"next\"===this.method&&(this.arg=e),m}},t}function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){Object(a.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.default=function(){var e=Object(i.useState)({avatar:\"\",name:\"\",password:\"\",cf_password:\"\"}),t=e[0],r=e[1],o=t.avatar,l=t.name,m=t.password,j=t.cf_password,b=Object(i.useContext)(s.a),g=b.state,O=b.dispatch,w=g.auth,x=g.notify,N=g.orders;Object(i.useEffect)((function(){w.user&&r(v(v({},t),{},{name:w.user.name}))}),[w.user]);var E=function(e){var n=e.target,o=n.name,c=n.value;r(v(v({},t),{},Object(a.a)({},o,c))),O({type:\"NOTIFY\",payload:{}})},L=function(){O({type:\"NOTIFY\",payload:{loading:!0}}),Object(p.c)(\"user/resetPassword\",{password:m},w.token).then((function(e){return e.err?O({type:\"NOTIFY\",payload:{error:e.err}}):O({type:\"NOTIFY\",payload:{success:e.msg}})}))},_=function(){var e=Object(n.a)(y().mark((function e(){var t;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(O({type:\"NOTIFY\",payload:{loading:!0}}),!o){e.next=5;break}return e.next=4,Object(d.a)([o]);case 4:t=e.sent;case 5:Object(p.c)(\"user\",{name:l,avatar:o?t[0].url:w.user.avatar},w.token).then((function(e){return e.err?O({type:\"NOTIFY\",payload:{error:e.err}}):(O({type:\"AUTH\",payload:{token:w.token,user:e.user}}),O({type:\"NOTIFY\",payload:{success:e.msg}}))}));case 6:case\"end\":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return w.user?Object(h.jsxs)(\"div\",{className:\"profile_page\",children:[Object(h.jsx)(c.a,{children:Object(h.jsx)(\"title\",{children:\"Profile\"})}),Object(h.jsxs)(\"section\",{className:\"row text-secondary my-3\",children:[Object(h.jsxs)(\"div\",{className:\"col-md-4\",children:[Object(h.jsx)(\"h3\",{className:\"text-center text-uppercase\",children:\"user\"===w.user.role?\"User Profile\":\"Admin Profile\"}),Object(h.jsxs)(\"div\",{className:\"avatar\",children:[Object(h.jsx)(\"img\",{src:o?URL.createObjectURL(o):w.user.avatar,alt:\"avatar\"}),Object(h.jsxs)(\"span\",{children:[Object(h.jsx)(\"i\",{className:\"fas fa-camera\"}),Object(h.jsx)(\"p\",{children:\"Change\"}),Object(h.jsx)(\"input\",{type:\"file\",name:\"file\",id:\"file_up\",accept:\"image/*\",onChange:function(e){var n=e.target.files[0];return n?n.size>1048576?O({type:\"NOTIFY\",payload:{error:\"The largest image size is 1mb.\"}}):\"image/jpeg\"!==n.type&&\"image/png\"!==n.type?O({type:\"NOTIFY\",payload:{error:\"Image format is incorrect.\"}}):void r(v(v({},t),{},{avatar:n})):O({type:\"NOTIFY\",payload:{error:\"File does not exist.\"}})}})]})]}),Object(h.jsxs)(\"div\",{className:\"form-group\",children:[Object(h.jsx)(\"label\",{htmlFor:\"name\",children:\"Name\"}),Object(h.jsx)(\"input\",{type:\"text\",name:\"name\",value:l,className:\"form-control\",placeholder:\"Your name\",onChange:E})]}),Object(h.jsxs)(\"div\",{className:\"form-group\",children:[Object(h.jsx)(\"label\",{htmlFor:\"email\",children:\"Email\"}),Object(h.jsx)(\"input\",{type:\"text\",name:\"email\",defaultValue:w.user.email,className:\"form-control\",disabled:!0})]}),Object(h.jsxs)(\"div\",{className:\"form-group\",children:[Object(h.jsx)(\"label\",{htmlFor:\"password\",children:\"New Password\"}),Object(h.jsx)(\"input\",{type:\"password\",name:\"password\",value:m,className:\"form-control\",placeholder:\"Your new password\",onChange:E})]}),Object(h.jsxs)(\"div\",{className:\"form-group\",children:[Object(h.jsx)(\"label\",{htmlFor:\"cf_password\",children:\"Confirm New Password\"}),Object(h.jsx)(\"input\",{type:\"password\",name:\"cf_password\",value:j,className:\"form-control\",placeholder:\"Confirm new password\",onChange:E})]}),Object(h.jsx)(\"button\",{className:\"btn btn-info\",disabled:x.loading,onClick:function(e){if(e.preventDefault(),m){var t=Object(f.a)(l,w.user.email,m,j);if(t)return O({type:\"NOTIFY\",payload:{error:t}});L()}(l!==w.user.name||o)&&_()},children:\"Update\"})]}),Object(h.jsxs)(\"div\",{className:\"col-md-8\",children:[Object(h.jsx)(\"h3\",{className:\"text-uppercase\",children:\"Orders\"}),Object(h.jsx)(\"div\",{className:\"my-3 table-responsive\",children:Object(h.jsxs)(\"table\",{className:\"table-bordered table-hover w-100 text-uppercase\",style:{minWidth:\"600px\",cursor:\"pointer\"},children:[Object(h.jsx)(\"thead\",{className:\"bg-light font-weight-bold\",children:Object(h.jsxs)(\"tr\",{children:[Object(h.jsx)(\"td\",{className:\"p-2\",children:\"id\"}),Object(h.jsx)(\"td\",{className:\"p-2\",children:\"date\"}),Object(h.jsx)(\"td\",{className:\"p-2\",children:\"total\"}),Object(h.jsx)(\"td\",{className:\"p-2\",children:\"delivered\"}),Object(h.jsx)(\"td\",{className:\"p-2\",children:\"paid\"})]})}),Object(h.jsx)(\"tbody\",{children:N.map((function(e){return Object(h.jsxs)(\"tr\",{children:[Object(h.jsx)(\"td\",{className:\"p-2\",children:Object(h.jsx)(u.a,{href:\"/order/\".concat(e._id),children:Object(h.jsx)(\"a\",{children:e._id})})}),Object(h.jsx)(\"td\",{className:\"p-2\",children:new Date(e.createdAt).toLocaleDateString()}),Object(h.jsxs)(\"td\",{className:\"p-2\",children:[\"$\",e.total]}),Object(h.jsx)(\"td\",{className:\"p-2\",children:e.delivered?Object(h.jsx)(\"i\",{className:\"fas fa-check text-success\"}):Object(h.jsx)(\"i\",{className:\"fas fa-times text-danger\"})}),Object(h.jsx)(\"td\",{className:\"p-2\",children:e.paid?Object(h.jsx)(\"i\",{className:\"fas fa-check text-success\"}):Object(h.jsx)(\"i\",{className:\"fas fa-times text-danger\"})})]},e._id)}))})]})})]})]})]}):null}},YFqc:function(e,t,r){e.exports=r(\"cTJO\")},cSol:function(e,t,r){\"use strict\";t.a=function(e,t,r,n){return e&&t&&r?function(e){return/^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/.test(e)}(t)?r.length<6?\"Password must be at least 6 characters.\":r!==n?\"Confirm password did not match.\":void 0:\"Invalid emails.\":\"Please add all fields.\"}},cTJO:function(e,t,r){\"use strict\";var n=r(\"J4zp\"),a=r(\"284h\");t.__esModule=!0,t.default=void 0;var o,c=a(r(\"q1tI\")),i=r(\"elyg\"),s=r(\"nOHt\"),l=new Map,u=window.IntersectionObserver,f={};var p=function(e,t){var r=o||(u?o=new u((function(e){e.forEach((function(e){if(l.has(e.target)){var t=l.get(e.target);(e.isIntersecting||e.intersectionRatio>0)&&(o.unobserve(e.target),l.delete(e.target),t())}}))}),{rootMargin:\"200px\"}):void 0);return r?(r.observe(e),l.set(e,t),function(){try{r.unobserve(e)}catch(t){console.error(t)}l.delete(e)}):function(){}};function d(e,t,r,n){(0,i.isLocalURL)(t)&&(e.prefetch(t,r,n).catch((function(e){0})),f[t+\"%\"+r]=!0)}var h=function(e){var t=!1!==e.prefetch,r=(0,s.useRouter)(),a=r&&r.pathname||\"/\",o=c.default.useMemo((function(){var t=(0,i.resolveHref)(a,e.href,!0),r=n(t,2),o=r[0],c=r[1];return{href:o,as:e.as?(0,i.resolveHref)(a,e.as):c||o}}),[a,e.href,e.as]),l=o.href,h=o.as,y=e.children,m=e.replace,v=e.shallow,j=e.scroll,b=e.locale;\"string\"===typeof y&&(y=c.default.createElement(\"a\",null,y));var g=c.Children.only(y),O=g&&\"object\"===typeof g&&g.ref,w=c.default.useRef(),x={ref:c.default.useCallback((function(e){(w.current&&(w.current(),w.current=void 0),t&&u&&e&&e.tagName&&(0,i.isLocalURL)(l))&&(f[l+\"%\"+h]||(w.current=p(e,(function(){d(r,l,h,{locale:\"undefined\"!==typeof b?b:r&&r.locale})}))));O&&(\"function\"===typeof O?O(e):\"object\"===typeof O&&(O.current=e))}),[t,O,l,h,r,b]),onClick:function(e){g.props&&\"function\"===typeof g.props.onClick&&g.props.onClick(e),e.defaultPrevented||function(e,t,r,n,a,o,c,s){(\"A\"!==e.currentTarget.nodeName||!function(e){var t=e.currentTarget.target;return t&&\"_self\"!==t||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||e.nativeEvent&&2===e.nativeEvent.which}(e)&&(0,i.isLocalURL)(r))&&(e.preventDefault(),null==c&&(c=n.indexOf(\"#\")<0),t[a?\"replace\":\"push\"](r,n,{shallow:o,locale:s}).then((function(e){e&&c&&(window.scrollTo(0,0),document.body.focus())})))}(e,r,l,h,m,v,j,b)}};return t&&(x.onMouseEnter=function(e){(0,i.isLocalURL)(l)&&(g.props&&\"function\"===typeof g.props.onMouseEnter&&g.props.onMouseEnter(e),d(r,l,h,{priority:!0}))}),(e.passHref||\"a\"===g.type&&!(\"href\"in g.props))&&(x.href=(0,i.addBasePath)((0,i.addLocale)(h,\"undefined\"!==typeof b?b:r&&r.locale,r&&r.defaultLocale))),c.default.cloneElement(g,x)};t.default=h},u1GD:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/profile\",function(){return r(\"W+IF\")}])}},[[\"u1GD\",0,1,2,3,4]]]);","extractedComments":[]}